{"displayName": "tfx-vertex-pipeline-tfx-pipeline-ml-demo2-black-friday", "labels": {"tfx_py_version": "3-10", "tfx_runner": "kubeflow_v2", "tfx_version": "1-15-1"}, "pipelineSpec": {"components": {"CsvExampleGen": {"executorLabel": "CsvExampleGen_executor", "inputDefinitions": {"parameters": {"input_base": {"type": "STRING"}, "input_config": {"type": "STRING"}, "output_config": {"type": "STRING"}, "output_data_format": {"type": "INT"}, "output_file_format": {"type": "INT"}}}, "outputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "ExampleValidator": {"executorLabel": "ExampleValidator_executor", "inputDefinitions": {"artifacts": {"schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}, "statistics": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"exclude_splits": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"anomalies": {"artifactType": {"instanceSchema": "title: tfx.ExampleAnomalies\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "PusherVertexAI": {"executorLabel": "PusherVertexAI_executor", "inputDefinitions": {"artifacts": {"model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}}, "parameters": {"custom_config": {"type": "STRING"}, "push_destination": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"pushed_model": {"artifactType": {"instanceSchema": "title: tfx.PushedModel\ntype: object\n"}}}}}, "SchemaGen": {"executorLabel": "SchemaGen_executor", "inputDefinitions": {"artifacts": {"statistics": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"exclude_splits": {"type": "STRING"}, "infer_feature_shape": {"type": "INT"}}}, "outputDefinitions": {"artifacts": {"schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}}}}, "StatisticsGen": {"executorLabel": "StatisticsGen_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}, "parameters": {"exclude_splits": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"statistics": {"artifactType": {"instanceSchema": "title: tfx.ExampleStatistics\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}}}}, "TrainerVertex": {"executorLabel": "TrainerVertex_executor", "inputDefinitions": {"artifacts": {"examples": {"artifactType": {"instanceSchema": "title: tfx.Examples\ntype: object\nproperties:\n  span:\n    type: integer\n    description: Span for an artifact.\n  version:\n    type: integer\n    description: Version for an artifact.\n  split_names:\n    type: string\n    description: JSON-encoded list of splits for an artifact. Empty string means artifact has no split.\n"}}, "schema": {"artifactType": {"instanceSchema": "title: tfx.Schema\ntype: object\n"}}}, "parameters": {"custom_config": {"type": "STRING"}, "eval_args": {"type": "STRING"}, "module_path": {"type": "STRING"}, "train_args": {"type": "STRING"}}}, "outputDefinitions": {"artifacts": {"model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\n"}}, "model_run": {"artifactType": {"instanceSchema": "title: tfx.ModelRun\ntype: object\n"}}}}}, "finish_pubsub_event": {"executorLabel": "finish_pubsub_event_executor", "inputDefinitions": {"parameters": {"project": {"type": "STRING"}, "topic": {"type": "STRING"}}}}}, "deploymentSpec": {"executors": {"CsvExampleGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.example_gen.csv_example_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex", "lifecycle": {"preCacheCheck": {"args": ["--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.file_based_example_gen.driver"]}}}}, "ExampleValidator_executor": {"container": {"args": ["--executor_class_path", "tfx.components.example_validator.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex"}}, "PusherVertexAI_executor": {"container": {"args": ["--executor_class_path", "tfx.components.pusher.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex"}}, "SchemaGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.schema_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex"}}, "StatisticsGen_executor": {"container": {"args": ["--executor_class_path", "tfx.components.statistics_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex"}}, "TrainerVertex_executor": {"container": {"args": ["--executor_class_path", "tfx.components.trainer.executor.GenericExecutor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex"}}, "finish_pubsub_event_executor": {"container": {"args": ["--executor_class_path", "pipeline.components.finish_pubsub_event_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex"}}}}, "pipelineInfo": {"name": "tfx-pipeline-ml-demo2-black-friday"}, "root": {"dag": {"tasks": {"CsvExampleGen": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "CsvExampleGen"}, "inputs": {"parameters": {"input_base": {"runtimeValue": {"constantValue": {"stringValue": "gs://epm-spec-black-friday/data/"}}}, "input_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"splits\": [\n    {\n      \"name\": \"single_split\",\n      \"pattern\": \"*\"\n    }\n  ]\n}"}}}, "output_config": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"split_config\": {\n    \"splits\": [\n      {\n        \"hash_buckets\": 2,\n        \"name\": \"train\"\n      },\n      {\n        \"hash_buckets\": 1,\n        \"name\": \"eval\"\n      }\n    ]\n  }\n}"}}}, "output_data_format": {"runtimeValue": {"constantValue": {"intValue": "6"}}}, "output_file_format": {"runtimeValue": {"constantValue": {"intValue": "5"}}}}}, "taskInfo": {"name": "CsvExampleGen"}}, "ExampleValidator": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "ExampleValidator"}, "dependentTasks": ["SchemaGen", "StatisticsGen"], "inputs": {"artifacts": {"schema": {"taskOutputArtifact": {"outputArtifactKey": "schema", "producerTask": "SchemaGen"}}, "statistics": {"taskOutputArtifact": {"outputArtifactKey": "statistics", "producerTask": "StatisticsGen"}}}, "parameters": {"exclude_splits": {"runtimeValue": {"constantValue": {"stringValue": "[]"}}}}}, "taskInfo": {"name": "ExampleValidator"}}, "PusherVertexAI": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "PusherVertexAI"}, "dependentTasks": ["TrainerVertex"], "inputs": {"artifacts": {"model": {"taskOutputArtifact": {"outputArtifactKey": "model", "producerTask": "TrainerVertex"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "null"}}}, "push_destination": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"filesystem\": {\n    \"base_directory\": \"gs://epm-spec-black-friday/tfx_pipeline_output/tfx-pipeline-ml-demo2-black-friday/serving_model\"\n  }\n}"}}}}}, "taskInfo": {"name": "PusherVertexAI"}}, "SchemaGen": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "SchemaGen"}, "dependentTasks": ["StatisticsGen"], "inputs": {"artifacts": {"statistics": {"taskOutputArtifact": {"outputArtifactKey": "statistics", "producerTask": "StatisticsGen"}}}, "parameters": {"exclude_splits": {"runtimeValue": {"constantValue": {"stringValue": "[]"}}}, "infer_feature_shape": {"runtimeValue": {"constantValue": {"intValue": "1"}}}}}, "taskInfo": {"name": "SchemaGen"}}, "StatisticsGen": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "StatisticsGen"}, "dependentTasks": ["CsvExampleGen"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "examples", "producerTask": "CsvExampleGen"}}}, "parameters": {"exclude_splits": {"runtimeValue": {"constantValue": {"stringValue": "[]"}}}}}, "taskInfo": {"name": "StatisticsGen"}}, "TrainerVertex": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "TrainerVertex"}, "dependentTasks": ["CsvExampleGen", "SchemaGen"], "inputs": {"artifacts": {"examples": {"taskOutputArtifact": {"outputArtifactKey": "examples", "producerTask": "CsvExampleGen"}}, "schema": {"taskOutputArtifact": {"outputArtifactKey": "schema", "producerTask": "SchemaGen"}}}, "parameters": {"custom_config": {"runtimeValue": {"constantValue": {"stringValue": "{\"ai_platform_enable_vertex\": true, \"ai_platform_training_args\": {\"masterConfig\": {\"imageUri\": \"us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex\"}, \"project\": \"ml-spec-black-friday-46176\", \"region\": \"us-central1\", \"worker_pool_specs\": [{\"container_spec\": {\"image_uri\": \"us.gcr.io/ml-spec-black-friday-46176/tfx-pipeline-ml-demo2-black-friday-vertex\"}, \"machine_spec\": {\"machine_type\": \"n1-standard-4\"}, \"replica_count\": 1}]}, \"ai_platform_vertex_region\": \"us-central1\", \"use_gpu\": false}"}}}, "eval_args": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"num_steps\": 1\n}"}}}, "module_path": {"runtimeValue": {"constantValue": {"stringValue": "model@gs://epm-spec-black-friday/tfx_pipeline_output/tfx-pipeline-ml-demo2-black-friday/_wheels/tfx_user_code_TrainerVertex-0.0+f86285ee75204db3fc12e960bf0ac703d21248f58bb23a59922f0e97bbd58e1d-py3-none-any.whl"}}}, "train_args": {"runtimeValue": {"constantValue": {"stringValue": "{\n  \"num_steps\": 1\n}"}}}}}, "taskInfo": {"name": "TrainerVertex"}}, "finish_pubsub_event": {"cachingOptions": {"enableCache": true}, "componentRef": {"name": "finish_pubsub_event"}, "dependentTasks": ["PusherVertexAI"], "inputs": {"parameters": {"project": {"runtimeValue": {"constantValue": {"stringValue": "ml-spec-black-friday-46176"}}}, "topic": {"runtimeValue": {"constantValue": {"stringValue": "black-friday-training-finish"}}}}}, "taskInfo": {"name": "finish_pubsub_event"}}}}}, "schemaVersion": "2.0.0", "sdkVersion": "tfx-1.15.1"}, "runtimeConfig": {"gcsOutputDirectory": "gs://epm-spec-black-friday/tfx_pipeline_output/tfx-pipeline-ml-demo2-black-friday"}}